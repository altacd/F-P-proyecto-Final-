<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registros</title>
    <link rel="stylesheet" href="estilo.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
</head>
<body>
    <h1>Registro</h1>
    <form action="javascript:void(0);" method="(POST)" onsubmit="app.Add()" >  
       <div class="form-group row">
           <div class="col-xs-4">
            <input type="text" class="form-control" id="add-name" placeholder="nueva venta" >
            
           </div>
           <input class="btn btn-secondary" type="submit" value="add">
       </div>
    </form>

    <div id="spp" role="aria-hidden">
    <form action="javascript:void(0);" method="POST" id="saveEdit" >  
        <div class="form-group row">
            <div class="col-xs-4">
             <input type="text" class="form-control" id="edit-name"  >
             <input type="submit" value="Edit" class="form-control" > <a onclick="CloseInput()" aria-label="Close">&#1006;</a>
             
            </div>
           
        </div>
     </form>
    </div>

 

    <p id="counter"></p>

     <table>
         <tr>
             <th>venta</th>
         </tr>
         <tbody id="ventas"></tbody>
     </table>
       

       <script >
var app = new function(){
    this.el = document.getElementById('ventas');
    this.ventas = ['laptop', 'celular', 'monitor', 'mause'];
    this.Count = function(data){
        var el = document.getElementById('counter');
        var name = 'numero de ventas';
        if(data){
            if(data > 1){
                name = 'ventas';
            }
            el.innerHTML = data + ' ' + name;
        }
        else{
            el.innerHTML  = ' no ' +name;
        }
    };
    this.Fetchall = function(){
    if(this.ventas.length >0){
        var data =' ';
        for(i = 0; i < this.ventas.length; i++){
            data += '<tr>';
            data += '<td>' + this.ventas[i] + '</td>';
            data += '<td><button onclick="app.Edit(' + i + ')">Edit</button><td>';
            data += '<td><button onclick="app.Delete(' + i + ')">delete</button><td>';
            data += '</tr>';
        }
    }
    this.Count(this.ventas.length);
       return this.el.innerHTML = data;
    };

    this.Add = function(){
        el = document.getElementById('add-name');
        var venta = el.value;
        if(ventas){
            this.ventas.push(venta.trim());

            el.value = '';
            this.Fetchall();
        }
    };

    this.Edit = function(item){
     var el = document.getElementById('edit-name');

     el.value = this.ventas[item];

     document.getElementById('spp').style.display = 'block';
     self = this;
     document.getElementById('saveEdit').onsubmit = function(){
         var ventaEdit = el.value;
         if(ventaEdit){
             self.ventas.splice(item, 1, ventaEdit.trim());
             self.Fetchall();
             CloseInput();
         }
      }
    };

    this.Delete = function (item) {
        this.ventas.splice(item, 1);
        this.Fetchall();
        if(item){
            this.ventas.splice(item, 1);
        this.Fetchall();
        }
    
    };

}

app.Fetchall();
    function CloseInput(){
        document.getElementById('spp').style.display = 'none';
    }
    
    
       </script>
         
    
</body>
</html>